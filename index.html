<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cybersecurity Command Simulation</title>

<style>
:root {
    --cyan: #00ffff;
    --bg-dark: #050505;
    --panel-dark: #0f0f0f;
    --danger: #ff3b3b;
    --safe: #2aff6a;
    --info: #3b82f6;
    --warning: #ffcc00;
}

body {
    margin: 0;
    font-family: "Segoe UI", system-ui, sans-serif;
    background: radial-gradient(circle at center, #111, #000);
    color: #fff;
    overflow: hidden;
}

.container {
    display: flex;
    height: 100vh;
}

/* LEFT PANEL */
.left {
    width: 28%;
    background: linear-gradient(180deg, #0b0b0b, #050505);
    padding: 24px;
    border-right: 2px solid #1f1f1f;
    display: flex;
    flex-direction: column;
}

h1 {
    text-align: center;
    font-size: 22px;
    color: var(--cyan);
    margin-bottom: 24px;
    letter-spacing: 1px;
}

.btn {
    width: 100%;
    padding: 14px;
    margin: 8px 0;
    font-size: 15px;
    font-weight: 600;
    background: #101010;
    border: 1px solid var(--cyan);
    color: var(--cyan);
    cursor: pointer;
    transition: all 0.25s ease;
}

.btn:hover {
    background: var(--cyan);
    color: #000;
    transform: translateY(-1px);
}

.status {
    margin-top: auto;
    padding: 14px;
    background: #111;
    border-left: 5px solid var(--safe);
    font-size: 14px;
    letter-spacing: 0.4px;
}

/* RIGHT PANEL */
.right {
    width: 72%;
    padding: 24px;
    background: #000;
    overflow-y: auto;
    position: relative;
}

.log {
    font-family: Consolas, monospace;
    font-size: 14px;
    line-height: 1.6;
    white-space: pre-line;
}

/* VIDEO */
video {
    width: 100%;
    border-radius: 6px;
    border: 2px solid var(--danger);
    box-shadow: 0 0 25px rgba(255,0,0,0.25);
}

/* ANIMATION */
@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

.blink {
    animation: blink 1.2s infinite;
}
</style>
</head>

<body>
<div class="container">

    <!-- LEFT PANEL -->
    <div class="left">
        <h1>CYBERSECURITY COMMAND DEMO</h1>

        <button class="btn" onclick="sendCmd('START')">â–¶ Start Attack Simulation</button>
        <button class="btn" onclick="sendCmd('BLUE')">ðŸ”µ Monitoring Mode</button>
        <button class="btn" onclick="sendCmd('GREEN')">ðŸŸ¢ Secure Mode</button>
        <button class="btn" onclick="sendCmd('VIDEO')">ðŸŽ¥ Play Attack Video</button>
        <button class="btn" onclick="sendCmd('RESET')">âŸ³ Reset Demo</button>

        <div class="status" id="status">System Idle â€¢ Awaiting Command</div>
    </div>

    <!-- RIGHT PANEL -->
    <div class="right">
        <div id="output" class="log"></div>
    </div>

</div>

<script>
const ws = new WebSocket(
    (location.protocol === "https:" ? "wss://" : "ws://") +
    location.host + "/ws"
);

const output = document.getElementById("output");
const statusBox = document.getElementById("status");

/* SEND COMMAND */
function sendCmd(cmd) {
    fetch("/cmd/" + cmd, { method: "POST" });
}

/* HANDLE SERVER EVENTS */
ws.onmessage = (event) => {
    const cmd = event.data;

    /* START ATTACK */
    if (cmd === "START") {
        document.body.style.background = "#300";
        statusBox.innerHTML = "âš  ACTIVE CYBER ATTACK DETECTED";
        statusBox.style.borderLeftColor = "var(--danger)";
        statusBox.classList.add("blink");

        output.innerText = "";

        const lines = [
            "Initializing intrusion detection systems...",
            "Unauthorized access attempt detected",
            "Firewall rule bypass in progress",
            "Exploit payload injected into memory",
            "Privilege escalation successful",
            "Encrypted tunnel established",
            "Command & Control server connected",
            "Credential harvesting module loaded",
            "Keylogger activated",
            "Persistence mechanism installed",
            "Lateral movement detected",
            "Database enumeration ongoing",
            "Sensitive files accessed",
            "Data exfiltration in progress",
            "Anti-forensics techniques applied",
            "Security logs manipulated",
            "Root-level access obtained",
            "Threat severity elevated to CRITICAL",
            "Incident response recommended",
            "Cyber breach simulation complete"
        ];

        let i = 0;
        const timer = setInterval(() => {
            if (i >= lines.length) {
                clearInterval(timer);
                return;
            }
            output.innerText += lines[i++] + "\n";
        }, 140);
    }

    /* BLUE MODE */
    if (cmd === "BLUE") {
        document.body.style.background = "#001c33";
        statusBox.innerHTML = "ðŸ”µ Monitoring Mode Active";
        statusBox.style.borderLeftColor = "var(--info)";
        statusBox.classList.remove("blink");
    }

    /* GREEN MODE */
    if (cmd === "GREEN") {
        document.body.style.background = "#002610";
        statusBox.innerHTML = "ðŸŸ¢ System Secure â€¢ No Threats Detected";
        statusBox.style.borderLeftColor = "var(--safe)";
        statusBox.classList.remove("blink");
    }

    /* VIDEO */
    if (cmd === "VIDEO") {
        output.innerHTML = `
            <video id="attackVideo" muted playsinline preload="auto">
                <source src="/static/hacking_demo.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        `;

        const video = document.getElementById("attackVideo");
        video.currentTime = 0;
        video.play().catch(err => console.log("Autoplay blocked:", err));
    }

    /* RESET */
    if (cmd === "RESET") {
        document.body.style.background = "#000";
        statusBox.innerHTML = "âœ” Threat Neutralized â€¢ System Stable";
        statusBox.style.borderLeftColor = "var(--safe)";
        statusBox.classList.remove("blink");

        output.innerHTML = `
            <h2 style="color: var(--safe);">Security Restored</h2>
            <ul>
                <li>Continuous monitoring is critical</li>
                <li>Zero-trust security minimizes damage</li>
                <li>Early detection prevents escalation</li>
                <li>Human awareness is the strongest defense</li>
            </ul>
        `;
    }
};
</script>

</body>
</html>