<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Cybersecurity Command Demo</title>

<style>
* {
  box-sizing: border-box;
  font-family: Consolas, monospace;
}

body {
  margin: 0;
  background: #000;
  color: #00e5ff;
  display: flex;
  height: 100vh;
  overflow: hidden;
}

/* LEFT PANEL */
.sidebar {
  width: 320px;
  background: #0a0a0a;
  border-right: 1px solid #00e5ff44;
  padding: 15px;
}

h2 {
  text-align: center;
  margin-bottom: 15px;
  font-size: 18px;
}

button {
  width: 100%;
  background: transparent;
  border: 1px solid #00e5ff66;
  color: #00e5ff;
  padding: 10px;
  margin-bottom: 10px;
  cursor: pointer;
}

button.active {
  border-color: #00ff88;
  color: #00ff88;
  box-shadow: 0 0 8px #00ff88;
}

/* STATUS */
.status {
  margin-top: 15px;
  padding: 8px;
  font-size: 12px;
  border-left: 4px solid yellow;
  background: #111;
}

/* RIGHT PANEL */
.main {
  flex: 1;
  position: relative;
  background: radial-gradient(circle, #001111, #000);
}

/* TERMINAL */
.terminal {
  position: absolute;
  inset: 0;
  padding: 12px;
  color: #ff3b3b;
  font-size: 13px;
  overflow-y: auto;
  white-space: pre-wrap;
}

/* PROGRESS BAR */
.progress-wrapper {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 6px;
  background: #111;
}

#progressBar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, red, orange);
  transition: width 0.15s linear;
}

/* STATES */
body.attack {
  background: radial-gradient(circle, #220000, #000);
}

body.safe {
  background: radial-gradient(circle, #002200, #000);
}

/* GLITCH */
@keyframes glitch {
  0% { transform: translate(0); }
  25% { transform: translate(-1px, 1px); }
  50% { transform: translate(1px, -1px); }
  75% { transform: translate(-1px, 0); }
}

.glitch .main {
  animation: glitch 0.15s infinite;
}
</style>
</head>

<body class="safe">

<!-- LEFT -->
<div class="sidebar">
  <h2>CYBERSECURITY COMMAND DEMO</h2>

  <button onclick="startAttack(this)">‚ñ∂ Start Attack Simulation</button>
  <button onclick="monitor(this)">üì° Monitoring Mode</button>
  <button onclick="secure(this)">üõ° Secure Mode</button>
  <button onclick="playVideo(this)">üé• Play Attack Video</button>
  <button onclick="resetSystem(this)">‚úî Reset System</button>

  <div id="status" class="status">
    ‚óè System Idle ‚Äî No Threat Detected
  </div>
</div>

<!-- RIGHT -->
<div class="main">
  <div id="terminal" class="terminal"></div>
  <div class="progress-wrapper">
    <div id="progressBar"></div>
  </div>
</div>

<script>
const terminal = document.getElementById("terminal");
const progress = document.getElementById("progressBar");
const statusBox = document.getElementById("status");
let attackInterval;

/* BUTTON STATE */
function setActive(btn) {
  document.querySelectorAll("button").forEach(b => b.classList.remove("active"));
  btn.classList.add("active");
}

/* ATTACK */
function startAttack(btn) {
  fetch("/cmd/attack", { method: "POST" });

  setActive(btn);
  document.body.className = "attack glitch";

  terminal.innerHTML = "";
  progress.style.width = "0%";
  statusBox.innerText = "‚óè ALERT ‚Äî Intrusion Detected";
  statusBox.style.borderLeftColor = "red";

  let i = 0;
  clearInterval(attackInterval);

  attackInterval = setInterval(() => {
    if (i >= 40) {
      clearInterval(attackInterval);
      document.body.classList.remove("glitch");
      return;
    }

    const line = document.createElement("div");
    line.textContent =
      `[${new Date().toLocaleTimeString()}] Unauthorized access attempt :: IP 192.168.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`;

    terminal.appendChild(line);
    terminal.scrollTop = terminal.scrollHeight;

    progress.style.width = `${(i / 40) * 100}%`;
    i++;
  }, 120);
}

/* RESET */
function resetSystem(btn) {
  fetch("/cmd/reset", { method: "POST" });

  setActive(btn);
  clearInterval(attackInterval);
  document.body.className = "safe";

  terminal.innerHTML =
`Security Restored
‚úî Attack contained
‚úî System integrity verified
‚úî Defensive layers restored
‚úî User awareness prevents breaches`;

  progress.style.width = "100%";
  statusBox.innerText = "‚óè System Safe ‚Äî All Services Normal";
  statusBox.style.borderLeftColor = "lime";
}

/* PLACEHOLDERS */
function monitor(btn) {
  setActive(btn);
  terminal.innerHTML = "Monitoring network traffic...\nNo anomalies detected.";
}

function secure(btn) {
  setActive(btn);
  terminal.innerHTML = "Secure mode enabled.\nFirewall rules enforced.";
}

function playVideo(btn) {
  setActive(btn);
  terminal.innerHTML = "Attack video playing...\n(Video module unchanged)";
}
</script>

</body>
</html>