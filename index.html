<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cyber Security Live Demo</title>
  <style>
    body {
      margin: 0;
      background: black;
      color: #00ff00;
      font-family: monospace;
      overflow: hidden;
    }

    #header {
      padding: 10px;
      text-align: center;
      font-size: 22px;
      background: #111;
      border-bottom: 2px solid #0f0;
      position: relative;
      z-index: 2;
    }

    #lights {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 15px;
      position: relative;
      z-index: 2;
    }

    .light {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: #333;
    }

    #terminal {
      padding: 15px;
      height: calc(100vh - 160px);
      overflow-y: auto;
      white-space: pre-line;
      position: relative;
      z-index: 2;
      background: rgba(0,0,0,0.6);
    }

    /* üî• Video now visible for autoplay */
    #hackVideo {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 1;
      display: block;
    }
  </style>
</head>
<body>

  <div id="header">CYBER SECURITY AWARENESS DEMO</div>

  <div id="lights">
    <div class="light" id="redLight"></div>
    <div class="light" id="greenLight"></div>
    <div class="light" id="blueLight"></div>
  </div>

  <div id="terminal">
    ‚ö†Ô∏è This is a simulated cybersecurity awareness demo.  
    No real hacking is performed.
  </div>

  <!-- üé• AUTOPLAY VIDEO -->
  <video
    id="hackVideo"
    src="hacking_demo.mp4"
    muted
    autoplay
    playsinline
    preload="auto"
  ></video>

<script>
  const terminal = document.getElementById("terminal");
  const video = document.getElementById("hackVideo");

  const red = document.getElementById("redLight");
  const green = document.getElementById("greenLight");
  const blue = document.getElementById("blueLight");

  function clearLights() {
    red.style.background = "#333";
    green.style.background = "#333";
    blue.style.background = "#333";
  }

  function log(text) {
    terminal.textContent += "\n" + text;
    terminal.scrollTop = terminal.scrollHeight;
  }

  function hackingSimulation() {
    terminal.textContent = "";
    const lines = [
      "[+] Initializing exploit framework...",
      "[+] Scanning open ports on target...",
      "[+] Port 22 OPEN (SSH)",
      "[+] Port 80 OPEN (HTTP)",
      "[+] Injecting payload...",
      "[+] Bypassing firewall rules...",
      "[+] Escalating privileges...",
      "[+] Access granted: root",
      "[+] Dumping credentials...",
      "[+] Extracting sensitive data...",
      "[+] Uploading data to secure node...",
      "[+] Covering tracks...",
      "[+] Attack simulation complete"
    ];

    let i = 0;
    const interval = setInterval(() => {
      log(lines[i]);
      i++;
      if (i >= lines.length) clearInterval(interval);
    }, 350);
  }

  function playVideo() {
    terminal.textContent = "";
    video.style.display = "block";
    video.currentTime = 0;
    video.play().catch(() => {});
  }

  function resetDemo() {
    video.pause();
    video.style.display = "none";
    terminal.textContent =
      "‚ö†Ô∏è Cyber attacks happen due to weak passwords, phishing links, and unsafe networks.\n\nStay alert. Stay secure.";
    clearLights();
  }

  // üîå WebSocket
  const wsProtocol = location.protocol === "https:" ? "wss://" : "ws://";
  const ws = new WebSocket(wsProtocol + location.host + "/ws");

  ws.onmessage = (event) => {
    const cmd = event.data.toUpperCase();

    if (cmd === "START") {
      clearLights();
      red.style.background = "red";
      hackingSimulation();
    }

    if (cmd === "RED") {
      clearLights();
      red.style.background = "red";
    }

    if (cmd === "GREEN") {
      clearLights();
      green.style.background = "green";
    }

    if (cmd === "BLUE") {
      clearLights();
      blue.style.background = "blue";
    }

    if (cmd === "VIDEO") {
      playVideo();
    }

    if (cmd === "RESET") {
      resetDemo();
    }
  };
</script>

</body>
</html>