<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Cybersecurity Command Demo</title>

<style>
:root {
  --idle: #facc15;
  --attack: #ff0033;
  --monitor: #00bfff;
  --secure: #00ff88;
  --bg: #020617;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  background: black;
  color: #9ff;
  font-family: "Courier New", monospace;
}

.container {
  display: flex;
  height: 100vh;
}

/* LEFT PANEL */
.panel {
  width: 320px;
  border-right: 2px solid #0ff;
  padding: 15px;
}

h2 {
  color: #0ff;
  text-align: center;
}

.btn {
  border: 1px solid #0ff;
  padding: 10px;
  margin: 8px 0;
  cursor: default;
  text-align: center;
}

.btn.active {
  background: #003;
  border-color: var(--secure);
  color: var(--secure);
}

/* STATUS */
.status {
  margin-top: 15px;
  padding-left: 10px;
  border-left: 6px solid var(--idle);
}

/* INDICATOR */
.indicator {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  display: inline-block;
  margin-right: 6px;
  background: var(--idle);
}

/* MAIN DISPLAY */
.display {
  flex: 1;
  padding: 20px;
  position: relative;
  overflow: hidden;
}

/* TERMINAL */
#terminal {
  white-space: pre-line;
  font-size: 13px;
  line-height: 1.4;
}

/* GLITCH */
.glitch {
  animation: glitch 0.15s infinite;
}

@keyframes glitch {
  0% { transform: translate(0); }
  25% { transform: translate(2px, -2px); }
  50% { transform: translate(-2px, 2px); }
  75% { transform: translate(1px, -1px); }
}

/* VIDEO */
video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
</style>
</head>

<body>
<div class="container">
  <div class="panel">
    <h2>CYBERSECURITY COMMAND DEMO</h2>

    <div class="btn" id="btn-attack">â–¶ Start Attack Simulation</div>
    <div class="btn" id="btn-monitor">ðŸ“¡ Monitoring Mode</div>
    <div class="btn" id="btn-secure">ðŸ›¡ Secure Mode</div>
    <div class="btn" id="btn-video">ðŸŽ¥ Play Attack Video</div>
    <div class="btn" id="btn-reset">âœ” Reset System</div>

    <div class="status" id="statusBox">
      <span class="indicator" id="light"></span>
      <span id="statusText">System Idle â€“ No Threat Detected</span>
    </div>
  </div>

  <div class="display" id="display">
    <div id="terminal"></div>
  </div>
</div>

<script>
/* ---------------- WEBSOCKET ---------------- */
const ws = new WebSocket(
  (location.protocol === "https:" ? "wss://" : "ws://") +
  location.host + "/ws?v=" + Date.now()
);

/* KEEP ALIVE FOR RENDER */
setInterval(() => {
  if (ws.readyState === WebSocket.OPEN) ws.send("ping");
}, 25000);

ws.onopen = () => console.log("WebSocket connected");
ws.onclose = () => console.log("WebSocket closed");

/* ---------------- ELEMENTS ---------------- */
const terminal = document.getElementById("terminal");
const display = document.getElementById("display");
const statusText = document.getElementById("statusText");
const light = document.getElementById("light");
const buttons = {
  attack: document.getElementById("btn-attack"),
  monitoring: document.getElementById("btn-monitor"),
  secure: document.getElementById("btn-secure"),
  video: document.getElementById("btn-video"),
  reset: document.getElementById("btn-reset")
};

/* ---------------- HELPERS ---------------- */
function clearUI() {
  terminal.innerHTML = "";
  display.classList.remove("glitch");
  display.style.background = "black";
  Object.values(buttons).forEach(b => b.classList.remove("active"));
}

/* ---------------- STATES ---------------- */
function idle() {
  clearUI();
  light.style.background = "var(--idle)";
  statusText.textContent = "System Idle â€“ No Threat Detected";
}

function monitoring() {
  clearUI();
  buttons.monitoring.classList.add("active");
  light.style.background = "var(--monitor)";
  statusText.textContent = "Monitoring Network Traffic";
  display.style.background = "#001a33";
  terminal.innerHTML =
`[INFO] IDS active
[INFO] Packet inspection running
[INFO] No anomalies detected`;
}

function secure() {
  clearUI();
  buttons.secure.classList.add("active");
  light.style.background = "var(--secure)";
  statusText.textContent = "System Secured";
  display.style.background = "#001f14";
  terminal.innerHTML =
`âœ” Attack contained
âœ” System integrity verified
âœ” Defensive layers restored`;
}

function attack() {
  clearUI();
  buttons.attack.classList.add("active");
  light.style.background = "var(--attack)";
  statusText.textContent = "ACTIVE CYBER ATTACK DETECTED";
  display.style.background = "#1a0000";
  display.classList.add("glitch");

  let lines = "";
  for (let i = 1; i <= 40; i++) {
    lines += `[ALERT] Exploit vector ${i} injected :: MEMORY CORRUPTION\n`;
  }
  terminal.style.color = "red";
  terminal.textContent = lines;
}

function video() {
  clearUI();
  buttons.video.classList.add("active");
  terminal.innerHTML =
`<video src="/static/hacking_demo.mp4" autoplay controls></video>`;
}

function reset() {
  idle();
}

/* ---------------- SOCKET COMMAND HANDLER ---------------- */
ws.onmessage = (e) => {
  const state = e.data;
  if (state === "idle") idle();
  if (state === "attack") attack();
  if (state === "monitoring") monitoring();
  if (state === "secure") secure();
  if (state === "video") video();
  if (state === "reset") reset();
};

/* DEFAULT */
idle();
</script>
</body>
</html>