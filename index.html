<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cybersecurity Threat Simulation</title>

  <style>
    :root {
      --safe: #f5c400;
      --danger: #b00020;
      --green: #0f9d58;
      --blue: #1a73e8;
    }

    body {
      margin: 0;
      height: 100vh;
      background: #111;
      color: white;
      font-family: "Courier New", monospace;
      display: grid;
      grid-template-columns: 1fr 2fr;
    }

    /* LEFT PANEL */
    #left {
      background: #000;
      border-right: 2px solid #222;
      padding: 20px;
      display: flex;
      flex-direction: column;
    }

    #statusLight {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--safe);
      box-shadow: 0 0 15px var(--safe);
      margin-bottom: 10px;
    }

    #statusText {
      font-size: 1.2rem;
      margin-bottom: 20px;
    }

    #terminal {
      flex: 1;
      background: #050505;
      border: 1px solid #222;
      padding: 10px;
      overflow-y: auto;
      font-size: 0.85rem;
      color: #ff4d4d;
      display: none;
    }

    /* RIGHT PANEL */
    #right {
      padding: 30px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    #message {
      font-size: 2rem;
      margin-bottom: 20px;
    }

    video {
      width: 80%;
      max-width: 720px;
      border: 3px solid #333;
      display: none;
    }
  </style>
</head>

<body>

  <div id="left">
    <div id="statusLight"></div>
    <div id="statusText">STATUS: NO ACTIVE THREAT</div>
    <div id="terminal"></div>
  </div>

  <div id="right">
    <div id="message">System operating under normal parameters.</div>
    <video id="video" controls>
      <source src="hacking_demo.mp4" type="video/mp4" />
    </video>
  </div>

  <script>
    const ws = new WebSocket(
      (location.protocol === "https:" ? "wss://" : "ws://") +
      location.host +
      "/ws"
    );

    const statusLight = document.getElementById("statusLight");
    const statusText = document.getElementById("statusText");
    const terminal = document.getElementById("terminal");
    const message = document.getElementById("message");
    const video = document.getElementById("video");

    const hackingLines = [
      "[!] Unauthorized access detected on port 443",
      "[*] Injecting payload into session buffer",
      "[!] Firewall bypass successful",
      "[*] Enumerating user privileges",
      "[!] Root access granted",
      "[*] Dumping credential hashes",
      "[!] AES key extracted",
      "[*] Establishing reverse shell",
      "[!] Data exfiltration in progress",
      "[*] Spoofing internal DNS records",
      "[!] Lateral movement detected",
      "[*] Deploying ransomware module",
      "[!] SOC alerts suppressed",
      "[*] Command-and-control channel active",
      "[!] Kernel exploit executed",
      "[*] Log files erased",
      "[!] Persistence mechanism installed",
      "[*] Memory injection complete",
      "[!] Threat escalation level CRITICAL",
      "[*] Attack sequence complete"
    ];

    function startDemo() {
      statusLight.style.background = "var(--danger)";
      statusLight.style.boxShadow = "0 0 20px var(--danger)";
      statusText.innerText = "STATUS: ACTIVE CYBER ATTACK";
      message.innerText = "⚠️ SECURITY BREACH DETECTED";
      terminal.style.display = "block";
      terminal.innerHTML = "";
      video.style.display = "none";

      let i = 0;
      const interval = setInterval(() => {
        if (i >= hackingLines.length) {
          clearInterval(interval);
          return;
        }
        terminal.innerHTML += hackingLines[i] + "<br>";
        terminal.scrollTop = terminal.scrollHeight;
        i++;
      }, 300);
    }

    function setColor(color, text) {
      statusLight.style.background = color;
      statusLight.style.boxShadow = 0 0 20px ${color};
      statusText.innerText = text;
      message.innerText = text;
      terminal.style.display = "none";
      video.style.display = "none";
    }

    function resetDemo() {
      setColor("var(--safe)", "STATUS: NO ACTIVE THREAT");
      message.innerText = "Awareness is the first line of defense.";
    }

    ws.onmessage = (e) => {
      const cmd = e.data;

      if (cmd === "START_DEMO") startDemo();
      if (cmd === "GREEN") setColor("var(--green)", "SYSTEM SECURE");
      if (cmd === "BLUE") setColor("var(--blue)", "SYSTEM MONITORING MODE");

      if (cmd === "VIDEO") {
        terminal.style.display = "none";
        statusText.innerText = "INCIDENT FOOTAGE";
        message.innerText = "Recorded cyber attack simulation";
        video.style.display = "block";
        video.play();
      }

      if (cmd === "RESET") resetDemo();
    };
  </script>

</body>
</html>