<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Cyber Threat Simulation Lab</title>

<style>
:root {
  --green: #00ff9c;
  --red: #ff3b3b;
  --blue: #3ba7ff;
  --yellow: #ffd23f;
}

body {
  margin: 0;
  background: radial-gradient(circle at top, #0a0f14, #000);
  color: var(--green);
  font-family: "Segoe UI", monospace;
  overflow: hidden;
}

#header {
  padding: 15px;
  text-align: center;
  font-size: 24px;
  letter-spacing: 2px;
  border-bottom: 1px solid #0f0;
  text-shadow: 0 0 15px #00ff9c;
}

#panel {
  display: flex;
  justify-content: center;
  gap: 25px;
  margin: 20px;
}

.light {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #222;
  box-shadow: inset 0 0 10px #000;
  transition: all 0.3s ease;
}

.glow-red { background: var(--red); box-shadow: 0 0 25px var(--red); }
.glow-green { background: var(--green); box-shadow: 0 0 25px var(--green); }
.glow-blue { background: var(--blue); box-shadow: 0 0 25px var(--blue); }
.glow-yellow { background: var(--yellow); box-shadow: 0 0 25px var(--yellow); }

#status {
  text-align: center;
  font-size: 18px;
  margin-bottom: 10px;
  color: #aaa;
}

#progress {
  width: 60%;
  height: 6px;
  margin: auto;
  background: #222;
  border-radius: 10px;
  overflow: hidden;
}

#progress span {
  display: block;
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--yellow), var(--red));
  animation: scan 2s infinite;
}

@keyframes scan {
  0% { width: 0%; }
  100% { width: 100%; }
}

#terminal {
  padding: 20px;
  height: calc(100vh - 300px);
  overflow-y: auto;
  white-space: pre-line;
  font-size: 14px;
  border-top: 1px solid #0f0;
}

#hackVideo {
  display: none;
  width: 100%;
  height: 100%;
  object-fit: cover;
}
</style>
</head>

<body>

<div id="header">CYBER THREAT SIMULATION LAB</div>

<div id="panel">
  <div id="red" class="light"></div>
  <div id="green" class="light"></div>
  <div id="blue" class="light"></div>
</div>

<div id="status">System Monitoring Active ‚Äî No Immediate Threats</div>

<div id="progress"><span></span></div>

<div id="terminal">
‚ö†Ô∏è This is a cybersecurity awareness demonstration.
No real systems are attacked.
</div>

<video id="hackVideo" src="hacking_demo.mp4" muted autoplay playsinline></video>

<script>
const terminal = document.getElementById("terminal");
const statusText = document.getElementById("status");
const video = document.getElementById("hackVideo");

const red = document.getElementById("red");
const green = document.getElementById("green");
const blue = document.getElementById("blue");

let socket;
let lastCommand = "IDLE";

function clearLights() {
  red.className = "light";
  green.className = "light";
  blue.className = "light";
}

function log(text) {
  terminal.textContent += "\n" + text;
  terminal.scrollTop = terminal.scrollHeight;
}

function hackingSimulation() {
  lastCommand = "START";
  terminal.textContent = "";
  statusText.textContent = "‚ö†Ô∏è INTRUSION DETECTED ‚Äî LIVE ATTACK SIMULATION";
  clearLights();
  red.classList.add("glow-red");

  const lines = [
    "[INIT] Threat engine activated",
    "[SCAN] Enumerating network ports",
    "[DETECT] Unauthorized SSH access",
    "[ALERT] Malicious payload injected",
    "[BYPASS] Firewall evasion detected",
    "[ESCALATE] Privilege escalation success",
    "[ACCESS] Root access obtained",
    "[EXTRACT] Sensitive data located",
    "[TRANSFER] Data exfiltration in progress",
    "[COMPLETE] Attack simulation finished"
  ];

  let i = 0;
  const interval = setInterval(() => {
    log(lines[i]);
    i++;
    if (i >= lines.length) clearInterval(interval);
  }, 350);
}

function playVideo() {
  lastCommand = "VIDEO";
  terminal.textContent = "";
  statusText.textContent = "Visual Breach Footage Playback";
  clearLights();
  blue.classList.add("glow-blue");
  video.style.display = "block";
  video.currentTime = 0;
  video.play().catch(()=>{});
}

function resetDemo() {
  lastCommand = "RESET";
  video.pause();
  video.style.display = "none";
  clearLights();
  red.classList.add("glow-yellow");
  green.classList.add("glow-yellow");
  blue.classList.add("glow-yellow");

  statusText.textContent = "System Reset ‚Äî Defensive Awareness Mode";
  terminal.textContent =
`‚úî Cyber attacks often succeed due to:
- Weak passwords
- Phishing links
- Unsecured public networks

üîê Stay informed. Stay secure.

Project: Live Cybersecurity Threat Awareness Demo`;
}

function applyCommand(cmd) {
  cmd = cmd.toUpperCase();

  if (cmd === "START") hackingSimulation();
  if (cmd === "RED") { lastCommand="RED"; clearLights(); red.classList.add("glow-red"); }
  if (cmd === "GREEN") { lastCommand="GREEN"; clearLights(); green.classList.add("glow-green"); statusText.textContent="Threat Neutralized ‚Äî System Stable"; }
  if (cmd === "BLUE") { lastCommand="BLUE"; clearLights(); blue.classList.add("glow-blue"); statusText.textContent="Security Response Engaged"; }
  if (cmd === "VIDEO") playVideo();
  if (cmd === "RESET") resetDemo();
}

function connectWebSocket() {
  const wsProtocol = location.protocol === "https:" ? "wss://" : "ws://";
  socket = new WebSocket(wsProtocol + location.host + "/ws");

  socket.onopen = () => {
    console.log("WebSocket connected");
    applyCommand(lastCommand); // restore state without refresh
  };

  socket.onmessage = (event) => {
    applyCommand(event.data);
  };

  socket.onclose = () => {
    console.log("WebSocket disconnected ‚Äî reconnecting...");
    setTimeout(connectWebSocket, 1500); // auto reconnect
  };

  socket.onerror = () => socket.close();
}

connectWebSocket();
</script>

</body>
</html>